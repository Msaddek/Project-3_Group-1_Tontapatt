<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">
	

<ui:composition template="WEB-INF/template/userTemplate.xhtml">

	<ui:define name="head">
		<title>Mes prestations</title>
		 <link rel="icon" href="resources/img/favicon.ico"/>
	</ui:define>

	<ui:define name="content">

		<div class="title-page">
			<div class="section-title">
				<h2>Prestation</h2>
				<p>Ma prestation : #{mbService.service.invoiceNumber}</p>
			</div>
		</div>

		<main class="mt-5 pt-4">

		<div style="margin: 0 auto">
			<div class="container wow fadeIn">

				<!-- Heading -->

				<!--Grid row-->
				<div class="row">

					<!--Grid column-->

					<div style="display: flex;">
						>
						<div class="col-md-8 mb-4">

							<!--Card-->
							<div class="card">

								<div class="row">
									<div class="category-description">
										<h2>Informations principales</h2>
									</div>
								</div>



								<div class="icon-info-presta">
									<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
									<div class="icon-info-descr">
										<h4>Vous êtes : #{mbService.service.field.owner eq
											mbUser.user ? "Propriétaire de terrain" : "Prestataire"}</h4>
									</div>
								</div>

								<div class="icon-info-presta">
									<br />
									<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
									<div class="icon-info-descr">
										<h4>Status : #{mbService.serviceState()}</h4>
									</div>
								</div>

								<div class="icon-info-presta">
									<br />
									<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
									<div class="icon-info-descr">
										<h4>Terrain concerné: #{mbService.service.field.name}</h4>
									</div>
								</div>


								<div class="icon-info-presta">
									<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
									<div class="icon-info-descr">
										<h4>Offre concernée :
											#{mbService.service.shearingOffer.name}</h4>
									</div>
								</div>

								<div class="icon-info-presta">
									<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
									<div class="icon-info-descr">
										<h4>Durée :
											#{mbService.calculateServiceNumberOfDaysByService()} jours</h4>
									</div>
								</div>

								<div class="row">
									<div class="box-calendar">
										<div class="calendar-offer">
											<label>Date de début</label>
											<p:calendar id="inline"
												value="#{mbService.service.startDate}" mode="inline"
												disabled="true" />
										</div>
										<div class="calendar-offer">
											<label>Date de fin</label>
											<p:calendar id="inline2" value="#{mbService.service.endDate}"
												mode="inline" disabled="true" />
										</div>
									</div>
								</div>


								<hr />
								<div class="row">
									<div class="category-description">
										<h2>Concernant l'offre</h2>
									</div>
								</div>

								<div class="box-group-information">
									<div class="group-info">
										<div class="icon-info-presta">
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Responsable :
													#{mbService.service.shearingOffer.breeder eq mbUser.user ?
													"Vous" : mbService.service.shearingOffer.breeder.firstName
													}</h4>
											</div>
										</div>

										<div class="icon-info-presta">
											<br />
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Nombre d'animaux:
													#{mbService.service.requiredAnimalCount}</h4>
											</div>
										</div>
									</div>
									<div class="group-info">
										<div class="icon-info-presta">
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Espèce :
													#{mbService.service.shearingOffer.race.species.species}</h4>
											</div>
										</div>

										<div class="icon-info-presta">
											<br />
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Race : #{mbService.service.shearingOffer.race.race}</h4>
											</div>
										</div>
									</div>
								</div>
								<hr class="mb-4" />

								<div class="row">
									<div class="category-description">
										<h2>Concernant le terrain</h2>
									</div>
								</div>

								<div class="box-group-information">
									<div class="group-info">
										<div class="icon-info-presta">
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Propriétaire : #{mbService.service.field.owner eq
													mbUser.user ? "Vous" :
													mbService.service.field.owner.firstName }</h4>
											</div>
										</div>

										<div class="icon-info-presta">
											<br />
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Superficie: #{mbService.service.field.area} Km²</h4>
											</div>
										</div>
									</div>
									<div class="group-info">
										<div class="icon-info-presta">
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Ville : #{mbService.service.field.zipCodeCity.name}</h4>
											</div>
										</div>

										<div class="icon-info-presta">
											<br />
											<b:iconAwesome class="icon-info" name="info-circle" size="lg" />
											<div class="icon-info-descr">
												<h4>Adresse : #{mbService.service.field.address}</h4>
											</div>
										</div>
									</div>
								</div>


								<hr />
								<div class="row">
									<div class="category-description">
										<h2>Déroulement</h2>
									</div>
								</div>

								<div class="icon-info-presta">
									<br />
									<b:iconAwesome name="chevron-circle-right" size="lg" />
									<div class="icon-info-descr">
										<h4>Installation du matériel :
											#{mbService.service.equipmentSetupDate eq null ? "À venir" :
											mbDate.localDateTimeFormatterWithHour(mbService.service.equipmentSetupDate)}</h4>
									</div>
								</div>

								<div class="icon-info-presta">
									<br />
									<b:iconAwesome name="chevron-circle-right" size="lg" />
									<div class="icon-info-descr">
										<h4>Installation du troupeau :
											#{mbService.service.herdSetupDate eq null ? "À venir" :
											mbDate.localDateTimeFormatterWithHour(mbService.service.herdSetupDate)}</h4>
									</div>
								</div>

							</div>
							<!--/.Card-->

						</div>
						<!--Grid column-->

						<div class="col-md-6 mb-4">

							<ui:fragment
								rendered="#{mbService.validateRefuseCancelServiceRequestButton() eq 'false'}">
								<div class="card">
									<div class="row">
										<div class="category-description">
											<h2>Gérer ma demande</h2>
										</div>
									</div>
							<div class="icon-info-presta">
									<button value="Accepter la demande" class="get-started-btn"
										data-target="#cancellationModal" data-toggle="modal"
										id="btnCancel">Annuler la demande</button>
							</div>
								</div>
							</ui:fragment>

							<div class="card">
								<div class="row">
									<div class="category-description">
										<h2>Anomalies</h2>
									</div>
								</div>


								<ui:fragment
									rendered="#{mbService.anomalyCreationButton() eq 'false'}">
									<div class="icon-info-presta">
									<button value="Nouvelle anomalie" class="get-started-btn"
										data-target="#anomalieModal" data-toggle="modal"
										id="btnAnomaly">Nouvelle anomalie</button>
										</div>
								</ui:fragment>

								<div class="row">

									<div class="table-box">
										<div class="table-offer">
											<table class="table table-dark table-striped">
												<thead>
													<tr>
														<th scope="col">Numéro</th>
														<th scope="col">Déclarant</th>
														<th scope="col">Date d'émission</th>
														<th scope="col">Type</th>
														<th scope="col">Status</th>
													</tr>
												</thead>
												<tbody>


													<tr>
														<th scope="row">ANM215405</th>
														<td>21/10/2021</td>
														<td>Vous</td>
														<td>Animal évadé</td>
														<td>Réglée</td>

													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>


		<b:modal id="anomalieModal">

			<div class="modal-body">
				<div class="form-title text-center">
					<h3>Déclarer une anomalie</h3>
					<br />
				</div>
				<div class="d-flex flex-column text-center">
					<b:form id="loginForm">
						<div class="form-group">
							<b:selectOneMenu id="inpAnomalyType"
								value="#{mbAnomaly.anomalyType}" required="true"
								converter="entityConverter"
								requiredMessage="Vous devez séléctionner un type">
								<f:selectItem itemLabel="Séléctionnez un type" itemValue="" />
								<f:selectItems value="#{mbAnomalyType.allAnomalyTypes()}"
									var="type" itemLabel="#{type.type}" itemValue="#{type}" />
							</b:selectOneMenu>
						</div>
						<div class="form-group">
							<b:inputTextarea
								placeholder="Décrivez le plus précisement possible votre anomalie"
								value="#{mbAnomaly.description}">

							</b:inputTextarea>
						</div>
						<b:commandButton value="Annuler la demadne"
							action="#{mbAnomaly.declareAnomaly(mbService.service)}" />
					</b:form>
				</div>
			</div>
			<div class="modal-footer d-flex justify-content-center">
				<div class="signup-section">

					<h4></h4>
				</div>
			</div>

			<f:facet name="footer">
				<b:button id="close" value="Fermer" dismiss="modal" />
			</f:facet>
		</b:modal> <b:modal id="cancellationModal">

			<div class="modal-body">
				<div class="form-title text-center">
					<h3>Annuler la demande de tonte</h3>
					<br />
				</div>
				<div class="d-flex flex-column text-center">
					<b:form id="cancellationModalForm">
						<div class="form-group">
							<b:selectOneMenu id="inpCancellationReason"
								value="#{mbService.cancellationReason}" required="true"
								converter="entityConverter"
								requiredMessage="Vous devez séléctionner la raison">
								<f:selectItem itemLabel="Séléctionnez une raison" itemValue="" />
								<f:selectItems
									value="#{mbCancellationReason.allCancellationReasons()}"
									var="reason" itemLabel="#{reason.reason}" itemValue="#{reason}" />

							</b:selectOneMenu>
							<b:message id="cancellationReasonMessage"
								for="inpCancellationReason" />
						</div>
						<b:commandButton value="Annuler la demadne"
							action="#{mbService.cancelServiceRequest()}" />
					</b:form>
				</div>
			</div>
			<div class="modal-footer d-flex justify-content-center">
				<div class="signup-section">

					<h4></h4>
				</div>
			</div>

			<f:facet name="footer">
				<b:button id="closeCancellationModal" value="Fermer" dismiss="modal" />
			</f:facet>
		</b:modal> </main>


	</ui:define>

</ui:composition>

</html>